<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ULTRA BASIT FREIGHTER TEST</title>
    <style>
        body {
            font-family: monospace;
            background: black;
            color: lime;
            padding: 50px;
            font-size: 18px;
        }
        button {
            background: lime;
            color: black;
            border: none;
            padding: 20px 40px;
            font-size: 20px;
            cursor: pointer;
            margin: 10px;
        }
        .result {
            margin: 20px 0;
            padding: 20px;
            background: #111;
            border: 2px solid lime;
        }
    </style>
</head>
<body>
    <h1>ğŸš¨ FREIGHTER ULTRA BASIT TEST ğŸš¨</h1>
    <h2 id="status">Kontrol ediliyor...</h2>
    
    <div class="result" id="result"></div>
    
    <button onclick="testNow()">ğŸ” TEKRAR TEST ET</button>
    <button onclick="tryConnect()">ğŸ”— BAÄLAN</button>

    <script>
        const result = document.getElementById('result');
        const status = document.getElementById('status');

        function testNow() {
            console.clear();
            result.innerHTML = '<h3>TEST SONUÃ‡LARI:</h3>';
            
            // Test 1: Basit kontrol
            result.innerHTML += '<p><strong>1. window.freighterApi var mÄ±?</strong></p>';
            if (window.freighterApi) {
                result.innerHTML += '<p style="color:lime">âœ… EVET! Freighter bulundu!</p>';
                result.innerHTML += '<p>Methods: ' + Object.keys(window.freighterApi).join(', ') + '</p>';
                status.textContent = 'âœ… FREIGHTER BULUNDU!';
                status.style.color = 'lime';
                return;
            } else {
                result.innerHTML += '<p style="color:red">âŒ HAYIR! window.freighterApi = undefined</p>';
            }
            
            // Test 2: Window'daki tÃ¼m keyler
            result.innerHTML += '<p><strong>2. Window objesinde "freighter" iÃ§eren key var mÄ±?</strong></p>';
            const allKeys = Object.keys(window);
            const freighterKeys = allKeys.filter(k => k.toLowerCase().includes('freighter'));
            
            if (freighterKeys.length > 0) {
                result.innerHTML += '<p style="color:yellow">âš ï¸ Bulundu: ' + freighterKeys.join(', ') + '</p>';
            } else {
                result.innerHTML += '<p style="color:red">âŒ HiÃ§bir key bulunamadÄ±</p>';
            }
            
            // Test 3: Browser bilgisi
            result.innerHTML += '<p><strong>3. TarayÄ±cÄ± Bilgisi:</strong></p>';
            result.innerHTML += '<p>User Agent: ' + navigator.userAgent + '</p>';
            result.innerHTML += '<p>URL: ' + location.href + '</p>';
            
            // Final status
            status.textContent = 'âŒ FREIGHTER BULUNAMADI!';
            status.style.color = 'red';
            
            result.innerHTML += '<hr><p style="color:red"><strong>SONUÃ‡: Extension tarayÄ±cÄ±ya inject edilmemiÅŸ!</strong></p>';
            result.innerHTML += '<p>Ã‡Ã–ZÃœM:</p>';
            result.innerHTML += '<ul>';
            result.innerHTML += '<li>chrome://extensions â†’ Freighter â†’ Details</li>';
            result.innerHTML += '<li>"Site access" â†’ "On all sites" seÃ§</li>';
            result.innerHTML += '<li>Extension\'Ä± reload et (ğŸ”„)</li>';
            result.innerHTML += '<li>Chrome\'u TAMAMEN kapat ve aÃ§</li>';
            result.innerHTML += '</ul>';
        }

        async function tryConnect() {
            if (!window.freighterApi) {
                alert('âŒ Freighter API bulunamadÄ±! Ã–nce extension\'Ä± dÃ¼zgÃ¼n yÃ¼kle.');
                return;
            }
            
            try {
                const response = await window.freighterApi.requestAccess();
                result.innerHTML += '<hr><p style="color:lime">âœ… BAÄLANTI BAÅARILI!</p>';
                result.innerHTML += '<p>Address: ' + response.address + '</p>';
                alert('âœ… BaÅŸarÄ±lÄ±! Address: ' + response.address);
            } catch (err) {
                result.innerHTML += '<hr><p style="color:red">âŒ BaÄŸlantÄ± hatasÄ±: ' + err.message + '</p>';
                alert('âŒ Hata: ' + err.message);
            }
        }

        // Sayfa yÃ¼klendiÄŸinde otomatik test
        let checkCount = 0;
        const interval = setInterval(() => {
            checkCount++;
            
            if (window.freighterApi) {
                clearInterval(interval);
                testNow();
            } else if (checkCount >= 30) { // 3 saniye
                clearInterval(interval);
                testNow();
            }
        }, 100);

        // Console'a da bilgi ver
        console.log('%cğŸ” FREIGHTER TEST BAÅLATILDI', 'color: lime; font-size: 20px');
        console.log('Sayfa: ' + location.href);
        console.log('30 kez kontrol edilecek (3 saniye)...');
    </script>
</body>
</html>
